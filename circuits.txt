;;
;; Repeater
;;
mov ports, 0010b
start:
mov pf, pb
wfe
jmp start


;;
;; Delayed
;; Repeater
;;
mov ports, 0010b
start:
mov c, 20 ;delay
loop:
sub c, 1
jnz loop
mov pf, pb
wfe
jmp start

;;
;; 3 Input
;; AND gate
;;
mov ports, 0x1110
start:
mov a, pb
and a, pl
and a, pr
mov pf, a
wfe
jmp start

;;
;; Dispenser
;; Double-Pulser
;;
mov ports, 0010b
start:
wfe
cmp pb, 0
jz start
mov pf, 1
mov pf, 0
mov pf, 1
mov pf, 0
jmp start

;;
;; Enabled-clock
;; pulse multiplier
;;
mov ports, 0010b
sleep:
wfe
start:
cmp pb, 0
jz sleep
mov pf, 1
nop
mov pf, 0
jmp start

;;
;; pulse extender
;;
mov ports, 0010b
sleep:
wfe
cmp pb, 0
jz sleep
mov pf, 1
mov c, 40 ;delay
loop:
sub c, 1
jnz loop
mov pf, 0
jmp sleep


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; test page 1
mov ports, 01000110b
sleep:
wfe
mov pf, pb
mov a, 10
call delay
call flash
mov pf, 0
jmp sleep

;; test page 2
delay:
push c
mov c, a
delay_loop:
dec c
jnz delay_loop
pop c
ret


;; test page 3
flash:
push c
mov c, a
flash_loop:
not pf
dec c
jnz flash_loop
pop c
ret
